<app-loading *ngIf="api.loading"></app-loading>

<div class="covid_info_grid">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Active Cases</h5>
      <ul>
        <li *ngIf="studentCaseData">Student Cases: <ng2-odometer [number]="studentCases"></ng2-odometer>
        </li>
        <li *ngIf="employeeCaseData">Employee Cases: <ng2-odometer [number]="employeeCases"></ng2-odometer>
        </li>
      </ul>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Students in Isolation or Quarantine</h5>
      <ul>
        <li *ngIf="isolationData">Students in Isolation: <ng2-odometer [number]="isolations"></ng2-odometer>
        </li>
        <li *ngIf="quarantineData">Students in Quarantine: <ng2-odometer [number]="quarantines"></ng2-odometer>
        </li>
      </ul>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Prevalence Test Results</h5>
      <ul>
        <li *ngIf="prevalencePositiveData">Positive Prevalence Tests: <ng2-odometer [number]="prevalencePositives"></ng2-odometer>
        </li>
        <li *ngIf="prevalenceNegativeData">Negative Prevalence Tests: <ng2-odometer [number]="prevalenceNegatives"></ng2-odometer>
        </li>
      </ul>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">COVID-19 Test Results</h5>
      <ul>
        <li *ngIf="negativeTestData">Negative Test Results: <ng2-odometer [number]="negativeTestResults"></ng2-odometer>
        </li>
        <li *ngIf="positiveTestData">Positive Test Results: <ng2-odometer [number]="positiveTestResults"></ng2-odometer>
        </li>
      </ul>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">About</h5>
      <ul>
        <li>
          <a class="card-link" style="cursor: pointer;" (click)="showModal = true" data-toggle="modal" data-target="#defintionModal">Definitions</a>
        </li>
        <li>
          <a class="card-link" href="https://together.vcu.edu/dashboard/">Data Source</a>
        </li>
        <li>
          <a class="card-link" href="https://github.com/stearnsbq/VCUCovid-website">Github</a>
        </li>
      </ul>

      <footer *ngIf="studentCaseData" class="blockquote-footer">Last Updated {{studentCaseData[studentCaseData.length - 1].date.split('T')[0]}}</footer>
    </div>
  </div>
</div>
<div class="charts">
  <div class="top">
    <div class="graph">
      <app-graph *ngIf="studentCaseData && employeeCaseData" [chartType]="'area'" [title]="'COVID-19 Cases'" [colors]="['rgba(255, 190, 12, 0.6)', 'rgba(33, 31, 31, 0.6)']" [dataNames]="['Student Cases', 'Employee Cases']" [data]="[studentCaseData, employeeCaseData]"></app-graph>
    </div>
    <div class="graph">
      <app-graph *ngIf="prevalenceNegativeData && prevalencePositiveData" [chartType]="'area'" [title]="'Prevalence Test Results'" [colors]="['rgba(255, 190, 12, 0.6)', 'rgba(33, 31, 31, 0.6)']" [dataNames]="['Negative Results', 'Positive Results']" [data]="[prevalenceNegativeData, prevalencePositiveData]"></app-graph>
    </div>
  </div>
  <div class="bottom">
      <div class="graph">
        <app-graph *ngIf="isolationData && quarantineData" [chartType]="'area'" [title]="'Students In Isolation or Quarantine'" [colors]="['rgba(255, 190, 12, 0.6)', 'rgba(33, 31, 31, 0.6)']" [dataNames]="['Quarantined Students', 'Isolated Students']" [data]="[quarantineData, isolationData]"></app-graph>
      </div>
      <div class="graph">
        <app-graph *ngIf="negativeTestData && positiveTestData" [chartType]="'area'" [title]="'Test Results'" [colors]="['rgba(255, 190, 12, 0.6)', 'rgba(33, 31, 31, 0.6)']" [dataNames]="['Negative Results', 'Positive Results']" [data]="[negativeTestData, positiveTestData]"></app-graph>
      </div>
  </div>
</div>



<div *ngIf="showModal" class="modal fade" id="defintionModal" tabindex="-1" role="dialog" aria-labelledby="defintionModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Definitions</h5>
        <button type="button" (click)="showModal = false" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h5>Active cases</h5>
        <p>Active cases are the number of people who have tested positive and are in isolation either on-campus or off-campus. Any reduction in cases indicates individuals being cleared to return to work or class.</p>
        <h5>Isolation and quarantine</h5>
        <p>Isolation separates those who test positive from people who are not sick. Quarantine separates and restricts the movement of those who may have been exposed to see if they become sick. Isolation and quarantine information presented below is specific to on-campus residential students. Off-campus students and employees may also be isolated or quarantined. Any reduction in cases indicates individuals being cleared to return to work or class.</p>
        <h5>Prevalence testing</h5>
        <p>VCU tests a percentage of asymptomatic community members Monday through Thursday to gauge the proportion of people with COVID-19 in the VCU community.</p>
        <h5>Entry testing</h5>
        <p>Residential students were mailed test kits to conduct COVID-19 testing prior to move-in. VCU restricts move-in for students who test positive. </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="showModal = false" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
